# 资金量预测

## 功能
- 以近250日每日时间切片的成交金额与当日成交金额的比的平均值，对应交易日对应时间切片，预测交易日总成交金额。
- 时间切片：交易1分钟，5分钟之后每15分钟运算一次。
	- 1, 5, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165, 180, 195, 210, 225, 240
- 输出到对应的图表

## redis 缓存
- 将平均比值保存在 redis 中
- key: `AMOUNTRATE`
- values: dict
```
	{'1': 0.0367,'5': 0.0942, '15': 0.1941, '30': 0.2984, '45': 0.3793, '60': 0.4424, '75': 0.4967, '90': 0.542, '105': 0.5827, '120': 0.6195, '135': 0.6685, '150': 0.7108, '165': 0.7528, '180': 0.7926, '195': 0.8338, '210': 0.8754, '225': 0.9272, '240': 1.0}
```
- 数据读取
```
r.get('AMOUNTRATE')
```
- 每日运算近250日比率
	- 第一分钟数据仅120日，取120日。其他数据取250日。
	- 每日盘后运算
	- 将数据填写到redis。
```
def get_time_weight(end_date=None):
```
	

## 数据预测
- 分时是调用
- 写入对应的 json 中
```
jsonData['data.Amount.series'][2]['data']
```