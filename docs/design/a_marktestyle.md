# 市场风格

## ISSUE

- [ ] 输出格式待完善

## 概念集中度

主要用于对股票池的分析，从而判断某种风格下的优势概念。

### 设计思路

1. 资金的流入是集中的，流出的随机的。
   1. 市场总是在个股的引领下走出板块效应，进而在短期内吸引更多的资金流入。
   2. 多头板块会吸引更多的资金。
2. 市场包括概念和行业
   1. 因为A 股市场最多以消息驱动的，集中度以概念为核心设计。
      1. 例外：有些股票是没有概念的。比如：银行、股票等。因此需要补全一些行业。
   2. 补充一些传统三级行业，完成概念的集中设计。
3. 以外部数据形式，不在设计数据表。
4. 数据以 stock_block 为基础。

### 实现方法

#### 数据准备

##### 外部数据 code_block_industry.csv

| 代码   | 名称 | 类型   | 说明                     |
| ------ | ---- | ------ | ------------------------ |
| code   | 代码 | str(6) | 通达信三级行业           |
| name   | 名称 | str(4) | 三级行业名称             |
| n1name | 分类 | str    | 概念大分类；会动态调整。 |

- 与code_stock_concept数据表列保持一致
- 与外部数据code_tdx_block.csv数据保持一致

##### 外部数据 code_block_extent.csv

```
'code', 'type', 'blockname', 'fill_1'
```

存储非传统行业的个别无概念股票，根据主营业务补充一些概念。

- 与 redis 的 [dataframe_blocklist](redis/dataframe_blocklist.md)一致，便于运算时候使用。

#### 算法

1. 基础数据 [dataframe_blocklist](redis/dataframe_blocklist.md)，找出没有概念的个股

2. 根据code_block_industry中的三级行业，补充为概念。

   1. 主要集中在能源、金融等行业，部分机械类行业。

3. 增加概念集中度函数

   ```
   系统概念：stock_block, 数据表
   概念集中度：load_all_concept()，新增函数。
   ```

4. 剔除以下概念

   ```
   '百度概念','一带一路','海峡西岸','含可转债','雄安新区', '乡村振兴', '腾讯概念', '小米概念', '阿里概念'
   ```

5. 股票池代码叠加概念，完成概念集中度输出。

